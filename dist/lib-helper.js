define(["jquery","underscore","common","datepicker","fuelux/spinner"],function(e,t,n){function s(e){var t=/(\d{2})\/(\d{2})\/(\d{4})/;return t.exec(e)}function o(t,n){var r,o={},u,a,f;n.validation.maxDate&&n.validation.minDate?o.onRender=function(e){return u=n.validation.minDate==="today"?e.valueOf():null,a=n.validation.maxDate==="today"?e.valueOf():null,u||(f=s(n.validation.minDate),u=(new Date(f[3],f[1]-1,f[2])).valueOf()),a||(f=s(n.validation.maxDate),a=(new Date(f[3],f[1]-1,f[2])).valueOf()),e.valueOf()<u||a>i.valueOf()?"disabled":""}:n.validation.maxDate?o.onRender=function(e){switch(n.validation.maxDate){case"today":a=e.valueOf();break;default:f=s(n.validation.maxDate),a=(new Date(f[3],f[1]-1,f[2])).valueOf()}return a>i.valueOf()?"disabled":""}:n.validation.minDate&&(o.onRender=function(e){switch(n.validation.minDate){case"today":u=e.valueOf();break;default:f=s(n.validation.minDate),u=(new Date(f[3],f[1]-1,f[2])).valueOf()}return e.valueOf()<u?"disabled":""}),r=e("#"+n.id,t).datepicker(o).on("changeDate",function(e){r.hide()}).data("datepicker")}function u(t,n){e("#"+n.id).spinner()}var r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);return{attachedJavaScript:function(e,t){if(!t.type)throw"Function attachedJavaScript, expected Type in an object parameter.";switch(t.type){case"date":o(e,t);break;case"number":t.options.spinner&&u(e,t)}},mergeValidationToField:function(e,r){if(t.indexOf(n.fieldNotRequireName,e.type)!==-1)return;if(!e.name)throw"Function mergeValidationToField, expected Name in a field parameter.";e.validation=r[e.name]?r[e.name]:{}}}});