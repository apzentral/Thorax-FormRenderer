define(["jquery","underscore","backbone","thorax","collections/collection","views/templatesloader","text!templates/app.handlebars","common","languages","helper","lib-helper"],function(e,t,n,r,i,s,o,u,a,f,l){return r.View.extend({name:"app",template:Handlebars.compile(o),events:{},initialize:function(){if(this.name==="app")throw"formSchema.Name is not found.";if(!this.bootstrap)this.bootstrap=2;else if(this.bootstrap!==2&&this.bootstrap!==3)throw"Bootstrap Option can only be version 2 or 3.";this.language||(this.language="en"),this.validation=this.validation||{},this.render(),this.$form=this.$el.find("form#"+this.name);var n=this;if(!(this.fields instanceof Array))throw"formSchema.Fields should be an array!";this.initViewLogicFlag(),t.each(this.fields,function(r){n.checkViewLogicFlag(r);if(t.indexOf(u.fieldNotRequireName,r.type)===-1&&typeof r.name=="undefined")throw"Fields requires to have Name property!";if(typeof r.type=="undefined")throw"Fields requires to have Type property!";r.attributes=r.attributes||{},r.options=r.options||{};var i,o,c=t.extend({id:r.attributes&&r.attributes.id?r.attributes.id:r.name?r.name:"",attr:"",language:a[n.language]},r),h=e("<div>",{"class":c.id+"-wrapper"});l.mergeValidationToField(c,n.validation),r.attributes&&t.each(r.attributes,function(e,t){c.attr+=t.toLowerCase()+'="'+e+'" '}),s.isRenderLabel(r.type)&&(i=s.getTemplate("label"),o=f.removeWhiteSpace(i(c)),h.append(o)),i=s.getTemplate(r.type,c),o=f.removeWhiteSpace(i(c)),n.injectHtmlMarkUp(r,h,o),c.id?f.addCssClassForInput(e("#"+c.id,h),c,n.bootstrap):h.removeClass("-wrapper").addClass(c.type+"-wrapper"),l.attachedJavaScript(n.$form,c)})},initViewLogicFlag:function(){this._renderButtonsInAction=!1},checkViewLogicFlag:function(e){switch(e.type){case"action":this._renderButtonsInAction=!0}},injectHtmlMarkUp:function(t,n,r){var i;switch(t.type){case"button":this._renderButtonsInAction&&(i=e("#form-render-actions",this.$el))}n.append(r),i?n.appendTo(i):this.$form.append(n)}})});